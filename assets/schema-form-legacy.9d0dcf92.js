System.register(["./vendor-legacy.8528c51e.js","./index-legacy.da7add73.js","./index-legacy.9ee1e062.js"],(function(e){"use strict";var t,o,n,a,s,l,r,c,i,d,u,m,f,p,v,h,y,b,g,A,F,k,w,P,R,S,x,B,C,I,M,O,j,T,V,$,_,L,D,G,E,q,W,z,J,N,X,Y,H,K,Q,U,Z,ee,te,oe,ne,ae,se,le,re,ce,ie,de,ue,me,fe;return{setters:[function(e){t=e.u,o=e.Q,n=e.bx,a=e.bw,s=e.b,l=e.al,r=e.m,c=e.bL,i=e.aw,d=e.D,u=e.h,m=e.a6,f=e.bG,p=e.k,v=e.w,h=e.v,y=e.o,b=e.G,g=e.E,A=e.aI,F=e.aO,k=e.H,w=e.a9,P=e.a8,R=e.bM,S=e.a5,x=e.bN,B=e.r,C=e.I,I=e.ag,M=e.F,O=e.bO,j=e.aX,T=e.f,V=e.t,$=e.n,_=e.j,L=e.q,D=e.bP,G=e.bQ,E=e.bR,q=e.s,W=e.am,z=e.bS,J=e.a2,N=e.e,X=e.aP,Y=e.ah,H=e.bT},function(e){K=e.A,Q=e.y,U=e.z,Z=e.j,ee=e.p,te=e.B,oe=e.o,ne=e.k,ae=e.C,se=e._,le=e.D,re=e.E,ce=e.F,ie=e.G,de=e.H,ue=e.J,me=e.K},function(e){fe=e.d}],execute:function(){const pe=K;function ve(e,t=""){const{t:o}=U();return e.includes("Input")||e.includes("Complete")?`${o("common.inputText")}${t}`:e.includes("Picker")||["Select","Cascader","Checkbox","CheckboxGroup","Switch","TreeSelect"].includes(e)?`${o("common.chooseText")}${t}`:""}const he=["DatePicker","MonthPicker","WeekPicker","TimePicker","RangePicker"],ye=Symbol("schema-form");function be(){return n(ye)}var ge=s({name:"SchemaFormItem",props:{formModel:{type:Object,default:()=>({})},schema:{type:Object,default:()=>({})},setFormModel:{type:Function,default:null},tableInstance:{type:Object},setItemRef:{type:Function,default:()=>({})}},emits:["update:formModel"],setup(e,{emit:n}){const a=e,s=be(),{formPropsRef:O}=s,j=l(a,"formModel",n),{t:T}=U(),{schema:V}=r(a),$=function(e,n){return t((()=>{const t=o(e),{labelCol:a={},wrapperCol:s={}}=t.formItemProps||{},{labelWidth:l,disabledLabelWidth:r}=t,{labelWidth:c,labelCol:i,wrapperCol:d}=o(n);if(!c&&!l&&!i||r)return a.style={textAlign:"left"},{labelCol:a,wrapperCol:s};let u=l||c;const m={...i,...a},f={...d,...s};return u&&(u=Q(u)?`${u}px`:u),{labelCol:{style:{width:u},...m},wrapperCol:{style:{width:`calc(100% - ${u})`},...f}}}))}(V,O),_=t((()=>{const{component:e,componentProps:t}=V.value;return!c(t)&&null!=t&&t.vModelKey?t.vModelKey:Z(e)&&["Switch","Checkbox"].includes(e)?"checked":"value"})),L=t((()=>{const{formModel:e,schema:t,tableInstance:n}=a,{mergeDynamicData:l}=o(O);return{field:t.field,formInstance:s,tableInstance:n,formModel:e,values:{...l,...e},schema:t}})),D=t((()=>{const{vShow:e,vIf:t,isAdvanced:n=!1}=o(V),{showAdvancedButton:a}=o(O),s=!a||!ee(n)||n;let l=!0,r=!0;return ee(e)&&(l=e),ee(t)&&(r=t),c(e)&&(l=e(o(L))),c(t)&&(r=t(o(L))),l=l&&s,{isShow:l,isIfShow:r}})),G=t((()=>{const{disabled:e}=o(O),{dynamicDisabled:t}=a.schema,{disabled:n=!1}=o(z);let s=!!e||n;return ee(t)&&(s=t),c(t)&&(s=t(o(L))),s})),E=(e,t=o(L))=>{if(Z(e))return d(M,null,[e]);if(i(e))return e;if(c(e))return E(e(t));if(ne(e)){const t=Object.keys(e);return t.some((e=>e.startsWith("_")||["setup","render"].includes(e)))?e:t.reduce(((t,o)=>(t[o]=(...t)=>E(e[o],t),t)),{})}return e},q=t((()=>{var e;const t=a.schema.component;return Z(t)&&null!==(e=te[t])&&void 0!==e?e:E(t)})),W=t((()=>{var e;const t=null!==(e=a.schema.componentSlots)&&void 0!==e?e:{};return Z(t)||i(t)?{default:(...e)=>E(t,e)}:E(t)})),z=t((()=>{const{schema:e}=a;let{componentProps:t={},component:n,label:s=""}=e;var l,r,i;return c(t)&&(t=null!==(l=t(o(L)))&&void 0!==l?l:{}),"RangePicker"!==n&&Z(n)&&(null!==(i=(r=t).placeholder)&&void 0!==i||(r.placeholder=ve(n,s))),"Divider"===e.component&&(t=Object.assign({type:"horizontal"},t,{orientation:"left",plain:!0})),"field35"===e.field&&console.log("componentProps",t),t})),J=t((()=>{var e;const t=(null===(e=a.schema)||void 0===e?void 0:e.componentProps)||{};return Object.keys(t).reduce(((e,o)=>(/on([A-Z])/.test(o)&&(e[o.replace(/on([A-Z])/,"$1").toLocaleLowerCase()]=t[o]),e)),{})})),N=t((()=>{const{label:e,helpMessage:t,helpComponentProps:n,subLabel:s}=a.schema,l=s?d("span",null,[e,u(" "),d("span",{class:"text-secondary"},[s])]):E(e),r=c(t)?t(o(L)):t;return!r||Array.isArray(r)&&0===r.length?l:d("span",null,[l,d(oe,m({placement:"top",class:"mx-1",text:r},n),null)])})),X=t((()=>{const{rules:e=[],component:t,rulesMessageJoinLabel:n,label:s,dynamicRules:l,required:r}=a.schema;if(c(l))return l(o(L));let i=f(e);const{rulesMessageJoinLabel:d}=o(O),u=Reflect.has(o(O),"rulesMessageJoinLabel")?n:d,m=Z(t)?`${ve(t,s)}${u?s:""}`:void 0,p=c(r)?r(o(L)):r;i&&0!==i.length||!p||(i=[{required:p,validator:function(e,t){const o=e.message||m;return void 0===t||ae(t)||Array.isArray(t)&&0===t.length||"string"==typeof t&&""===t.trim()||"object"==typeof t&&Reflect.has(t,"checked")&&Reflect.has(t,"halfChecked")&&Array.isArray(t.checked)&&Array.isArray(t.halfChecked)&&0===t.checked.length&&0===t.halfChecked.length?Promise.reject(o):Promise.resolve()}}]);const v=i.findIndex((e=>Reflect.has(e,"required")&&!Reflect.has(e,"validator")));if(-1!==v){const e=i[v];var h;if(t&&Z(t))Reflect.has(e,"type")||(e.type="InputNumber"===t?"number":"string"),e.message=e.message||m,(t.includes("Input")||t.includes("Textarea"))&&(e.whitespace=!0),function(e,t,o){["DatePicker","MonthPicker","WeekPicker","TimePicker"].includes(t)?e.type=o?"string":"object":["RangePicker","Upload","CheckboxGroup","TimePicker"].includes(t)?e.type="array":["InputNumber"].includes(t)&&(e.type="number")}(e,t,null===(h=o(z))||void 0===h?void 0:h.valueFormat)}const y=i.findIndex((e=>e.max));return-1===y||i[y].validator||(i[y].message=i[y].message||T("component.form.maxTip",[i[y].max])),i}));return p((async()=>{var e;if(null!==(e=z.value)&&void 0!==e&&e.request){const e=z.value,{componentProps:n,component:a}=V.value;V.value.loading=!0,"field35"===V.value.field&&console.log("compProps",e,O.value);try{var t;const s=await(null===(t=z.value)||void 0===t?void 0:t.request(o(L)));["Select","RadioGroup","CheckBoxGroup"].some((e=>e===a))?e.options=s:["TreeSelect","Tree"].some((e=>e===a))&&(e.treeData=s),n&&(n.requestResult=s)}finally{V.value.loading=!1}}})),(t,n)=>o(D).isIfShow?v((y(),b(o(I),F(m({key:0},o(V).colProps)),{default:g((()=>["Divider"===o(V).component?(y(),b(o(A),F(m({key:0},o(z))),{default:g((()=>[(y(),b(k(o(N))))])),_:1},16)):(y(),b(o(w).Item,m({key:1},{...o(V).formItemProps},{label:o(N),name:o(V).field,"label-col":o($).labelCol,"wrapper-col":o($).wrapperCol,rules:o(X)}),{default:g((()=>[o(V).slot?P(t.$slots,o(V).slot,F(m({key:0},o(L)))):o(q)?(y(),b(k(o(q)),m({key:1,ref:e.setItemRef,key:o(V).field},o(z),{[o(_)]:o(j)[o(V).field],["onUpdate:"+o(_)]:n[0]||(n[0]=e=>o(j)[o(V).field]=e),"allow-clear":!0,disabled:o(G)},R(o(J))),S({_:2},[Object.is(o(V).loading,!0)?{name:"notFoundContent",fn:g((()=>[d(o(x),{size:"small"})]))}:void 0,B(o(W),((e,t)=>({name:t,fn:g((n=>{var a;return[(y(),b(k(null!==(a=null==e?void 0:e({...o(L),slotData:n}))&&void 0!==a?a:e),{key:t}))]}))})))]),1040,["disabled"])):C("",!0)])),_:3},16,["label","name","label-col","wrapper-col","rules"]))])),_:3},16)),[[h,o(D).isShow]]):C("",!0)}});const Ae=s({props:{expand:{type:Boolean}},setup(e){const n=e;O((e=>({"3cc09834":o(a)})));const a=t((()=>(n.expand?0:.5)+"turn"));return(e,t)=>(y(),b(o(j),{class:"collapse-icon"}))}});var Fe=se(Ae,[["__scopeId","data-v-623bf38a"]]);const ke=s({name:"FormAction",inheritAttrs:!1,props:{showActionButtonGroup:{type:Boolean,default:!0},showResetButton:{type:Boolean,default:!0},showSubmitButton:{type:Boolean,default:!0},showAdvancedButton:{type:Boolean,default:!0},resetButtonOptions:{type:Object,default:()=>({})},submitButtonOptions:{type:Object,default:()=>({})},actionColOptions:{type:Object,default:()=>({})},actionSpan:{type:Number,default:6},isAdvanced:Boolean,hideAdvanceBtn:Boolean},emits:["toggle-advanced"],setup(e,{emit:n}){const a=e,{t:s}=U(),{resetFields:l,submit:r}=be(),c=t((()=>{const{showAdvancedButton:e,actionSpan:t,actionColOptions:o}=a,n=24-t;return{style:{textAlign:"right"},span:e?6:4,...e?{span:n<6?24:n}:{},...o}})),i=t((()=>Object.assign({text:s("common.resetText")},a.resetButtonOptions))),f=t((()=>Object.assign({text:s("common.queryText")},a.submitButtonOptions)));function p(){n("toggle-advanced",a.isAdvanced)}return(t,n)=>e.showActionButtonGroup?(y(),b(o(I),F(m({key:0},o(c))),{default:g((()=>[T("div",{style:$([{width:"100%"},{textAlign:o(c).style.textAlign}])},[d(o(w).Item,null,{default:g((()=>[P(t.$slots,"resetBefore"),e.showResetButton?(y(),b(o(pe),m({key:0,type:"default",class:"mr-2"},o(i),{onClick:o(l)}),{default:g((()=>[u(V(o(i).text),1)])),_:1},16,["onClick"])):C("",!0),P(t.$slots,"submitBefore"),e.showSubmitButton?(y(),b(o(pe),m({key:1,type:"primary",class:"mr-2"},o(f),{onClick:o(r)}),{default:g((()=>[u(V(o(f).text),1)])),_:1},16,["onClick"])):C("",!0),P(t.$slots,"advanceBefore"),e.showAdvancedButton&&!e.hideAdvanceBtn?(y(),b(o(pe),{key:2,type:"link",size:"small",onClick:p},{default:g((()=>[u(V(e.isAdvanced?o(s)("component.form.putAway"):o(s)("component.form.unfold"))+" ",1),d(o(Fe),{class:"ml-1",expand:!e.isAdvanced},null,8,["expand"])])),_:1})):C("",!0),P(t.$slots,"advanceAfter")])),_:3})],4)])),_:3},16)):C("",!0)}});function we(e){const{emit:t,formPropsRef:n,formSchemasRef:a,formModel:s,cacheFormModel:l,getFormProps:r,schemaFormRef:c,defaultFormValues:i,handleFormValues:d}=e;async function u(e){var t;return null===(t=c.value)||void 0===t?void 0:t.validateFields(e)}async function m(e){var t;return await(null===(t=c.value)||void 0===t?void 0:t.validate(e))}async function p(e){var t;await(null===(t=c.value)||void 0===t?void 0:t.clearValidate(e))}async function v(e){e&&e.preventDefault();const{submitFunc:n}=o(r);if(n&&le(n))await n();else if(o(c))try{const e=await m(),o=d(e);t("submit",o)}catch(a){return Promise.reject(a)}}return{submit:v,clearValidate:p,validate:m,validateFields:u,getFieldsValue:function(){return o(c)?d(D(o(s))):{}},updateSchema:async function(e){let t=[];if(ne(e)&&t.push(e),re(e)&&(t=[...e]),!t.every((e=>"Divider"===e.component||Reflect.has(e,"field")&&e.field)))return void console.error("All children of the form Schema array that need to be updated must contain the `field` field");const s=[];t.forEach((e=>{o(a).forEach((t=>{if(t.field===e.field){const o=fe(t,e);s.push(o)}else s.push(t)}))})),o(n).schemas=E(s,"field")},resetSchema:async function(e){let t=[];ne(e)&&t.push(e),re(e)&&(t=[...e]),o(n).schemas=t},appendSchemaByField:async function(e,t,l=!1){const r=f(o(a)),c=r.findIndex((e=>e.field===t));if(!t||-1===c||l)return l?r.unshift(e):r.push(e),s[e.field]=e.defaultValue,void(n.value.schemas=r);-1!==c&&r.splice(c+1,0,e),s[e.field]=e.defaultValue,n.value.schemas=r},removeSchemaByFiled:async function(e){const t=f(o(a));if(!e)return;let l=Z(e)?[e]:e;Z(e)&&(l=[e]);for(const o of l)if(Z(o)){const e=t.findIndex((e=>e.field===o));-1!==e&&(Reflect.deleteProperty(s,o),t.splice(e,1))}n.value.schemas=t},resetFields:async function(){const{resetFunc:e,submitOnReset:n}=o(r);e&&le(e)&&await e(),Object.keys(s).forEach((e=>{s[e]=i[e]})),t("reset",s),n&&v(),setTimeout(p)},setFieldsValue:async function(e){const t=o(a),r=t.map((e=>e.field)).filter(Boolean);Object.assign(l,e);const c=[];Object.keys(e).forEach((a=>{const l=t.find((e=>e.field===a));let i=e[a];const d=Reflect.has(e,a);var u,m;if(Z(null==l?void 0:l.component)&&(u=null==l?void 0:l.component,m=i,i=u&&["Input","InputPassword","InputSearch","InputTextArea"].includes(u)&&m&&Q(m)?`${m}`:m),d&&r.includes(a)){if(function(e){var t;return null===(t=o(n).schemas)||void 0===t?void 0:t.some((t=>!(t.field!==e||!Z(t.component))&&he.includes(t.component)))}(a))if(Array.isArray(i)){const e=[];for(const t of i)e.push(t?G(t):null);s[a]=e}else{var f;const{componentProps:e}=l||{};let t=e;le(e)&&(t=t({formPropsRef:n,formModel:s})),s[a]=i?null!==(f=t)&&void 0!==f&&f.valueFormat?i:G(i):null}else s[a]=i;c.push(a)}})),u(c)},scrollToField:async function(e,t){var o;await(null===(o=c.value)||void 0===o?void 0:o.scrollToField(e,t))}}}const Pe=e("d",G),Re=e=>{const{compRefs:t,formModel:n,formPropsRef:a,cacheFormModel:s,defaultFormValues:l,schemaFormRef:r,getFormProps:c}=e;return{setItemRef:e=>o=>{o&&(t[e.field]=o)},initFormValues:()=>{var e;null===(e=o(a).schemas)||void 0===e||e.forEach((e=>{const{defaultValue:t}=e;ce(t)||(n[e.field]=t,l[e.field]=t,s[e.field]=t)}))},setFormModel:(e,t)=>{n[e]=t,s[e]=t;const{validateTrigger:a}=o(c);var l;a&&"change"!==a||null===(l=r.value)||void 0===l||l.validateFields([e])},setSchemaFormProps:e=>{a.value=fe(o(a)||{},e)},handleFormValues:function(e){if(!ne(e))return{};const t={};for(const s of Object.entries(e)){var n,a;let[,e]=s;const[l]=s;if(!l||re(e)&&0===e.length||le(e))continue;const r=o(c).transformDateFunc;ne(e)&&(e=null==r?void 0:r(e)),re(e)&&null!==(n=e[0])&&void 0!==n&&n.format&&null!==(a=e[1])&&void 0!==a&&a.format&&(e=e.map((e=>null==r?void 0:r(e)))),Z(e)&&(e=e.trim()),q(t,l,e)}return function(e){const t=o(c).fieldMapToTime;if(!t||!Array.isArray(t))return e;for(const[o,[n,a],s="YYYY-MM-DD"]of t){if(!(o&&n&&a&&e[o]))continue;const[t,l]=e[o];e[n]=Pe(t).format(s),e[a]=Pe(l).format(s),Reflect.deleteProperty(e,o)}return e}(t)}}};function Se(){return{screenRef:t((()=>o(void 0))),widthRef:void 0,screenEnum:ie,realWidthRef:void 0}}const xe=24,Be=({instance:e,emit:n})=>{const{realWidthRef:a,screenEnum:s,screenRef:l}=Se(),{advanceState:r,getFormProps:c,formSchemasRef:i,formModel:d,defaultFormValues:u}=e,m=t((()=>{if(!r.isAdvanced)return 0;const e=o(c).emptySpan||0;if(Q(e))return e;if(ne(e)){const{span:t=0}=e;return e[o(l).toLowerCase()]||t||0}return 0}));function f(e,t=0,n=!1){const l=o(a),i=parseInt(e.md)||parseInt(e.xs)||parseInt(e.sm)||e.span||xe,d=parseInt(e.lg)||i,u=parseInt(e.xl)||d,m=parseInt(e.xxl)||u;return l<=s.LG?t+=i:l<s.XL?t+=d:l<s.XXL?t+=u:t+=m,n?(r.hideAdvanceBtn=!1,t<=48?(r.hideAdvanceBtn=!0,r.isAdvanced=!0):t>48&&t<=xe*(o(c).autoAdvancedLine||3)?r.hideAdvanceBtn=!1:r.isLoad||(r.isLoad=!0,r.isAdvanced=!r.isAdvanced),{isAdvanced:r.isAdvanced,itemColSum:t}):t>xe*(o(c).alwaysShowLines||1)?{isAdvanced:r.isAdvanced,itemColSum:t}:{isAdvanced:!0,itemColSum:t}}return W([()=>o(i),()=>r.isAdvanced,()=>o(a)],(()=>{const{showAdvancedButton:t}=o(c);t&&function(){let t=0,a=0;const{baseColProps:s={}}=o(c);for(const n of o(i)){const{vShow:l,colProps:r}=n;let c=!0;if(ee(l)&&(c=l),le(l)&&(c=l({schema:n,formModel:d,field:n.field,formInstance:e,values:{...o(u),...d}})),c&&(r||s)){const{itemColSum:e,isAdvanced:o}=f({...s,...r},t);t=e||0,o&&(a=t),n.isAdvanced=o}}r.actionSpan=a%xe+o(m),f(o(c).actionColOptions||{span:xe},t,!0),n("advanced-change")}()}),{immediate:!0}),{handleToggleAdvanced:function(){r.isAdvanced=!r.isAdvanced}}};e("_",s({name:"SchemaForm",props:de,emits:ue,setup(e,{expose:n,emit:s}){const l=e,r=z(),c=(({props:e,attrs:n})=>{const a=_(f(e)),s=L({...e.initialValues}),l=L({...e.initialValues}),r=_(),c={...e.initialValues},i=L({isAdvanced:!0,hideAdvanceBtn:!1,isLoad:!1,actionSpan:6}),d=t((()=>({...n,...a.value}))),u=t((()=>{const{baseRowStyle:e={},rowProps:t}=o(d);return{style:e,...t}})),m=t((()=>({...d.value,...i})));return{formModel:s,defaultFormValues:l,schemaFormRef:r,formPropsRef:a,cacheFormModel:c,compRefs:{},getFormProps:d,advanceState:i,getRowConfig:u,getFormActionBindProps:m,formSchemasRef:t((()=>o(a).schemas||[]))}})({props:l,attrs:r}),{formModel:i,getRowConfig:u,schemaFormRef:p,getFormProps:v,getFormActionBindProps:h,formSchemasRef:A}=c,k=Re({...c}),{initFormValues:R,handleFormValues:x,setFormModel:I,setItemRef:O,setSchemaFormProps:j}=k;R();const T=we({...c,emit:s,handleFormValues:x});J((()=>j(l)));const V={...c,...T,...k},{handleToggleAdvanced:$}=Be({instance:V,emit:s});return s("register",V),async function(e){a(ye,e)}(V),n(V),(e,t)=>(y(),b(o(w),m({ref_key:"schemaFormRef",ref:p},o(H)(o(v),o(me)),{model:o(i)}),{default:g((()=>[d(o(Y),F(X(o(u))),{default:g((()=>[P(e.$slots,"formHeader"),(y(!0),N(M,null,B(o(A),(t=>(y(),b(ge,{key:t.field,schema:t,"set-form-model":o(I),"form-model":o(i),"table-instance":e.tableInstance,"set-item-ref":o(O)(t)},S({_:2},[B(Object.keys(e.$slots),(t=>({name:t,fn:g((o=>[P(e.$slots,t,F(X(o||{})))]))})))]),1032,["schema","set-form-model","form-model","table-instance","set-item-ref"])))),128)),e.showActionButtonGroup?(y(),b(ke,m({key:0},o(h),{onToggleAdvanced:o($)}),S({_:2},[B(["resetBefore","submitBefore","advanceBefore","advanceAfter"],(t=>({name:t,fn:g((o=>[P(e.$slots,t,F(X(o||{})))]))})))]),1040,["onToggleAdvanced"])):C("",!0),P(e.$slots,"formFooter")])),_:3},16)])),_:3},16,["model"]))}}))}}}));
