var x=Object.defineProperty,_=Object.defineProperties;var w=Object.getOwnPropertyDescriptors;var d=Object.getOwnPropertySymbols;var C=Object.prototype.hasOwnProperty,S=Object.prototype.propertyIsEnumerable;var f=(n,t,e)=>t in n?x(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e,p=(n,t)=>{for(var e in t||(t={}))C.call(t,e)&&f(n,e,t[e]);if(d)for(var e of d(t))S.call(t,e)&&f(n,e,t[e]);return n},m=(n,t)=>_(n,w(t));var h=(n,t,e)=>new Promise((r,i)=>{var a=o=>{try{l(e.next(o))}catch(c){i(c)}},s=o=>{try{l(e.throw(o))}catch(c){i(c)}},l=o=>o.done?r(o.value):Promise.resolve(o.value).then(a,s);l((e=e.apply(n,t)).next())});import{am as O,k as y,bW as E,b as F,o as I,G as M,Q as g,D as u,bo as q,h as v,F as B}from"./vendor.0b1d9c36.js";import{u as D}from"./dynamic-table.bceae78c.js";import{i as k,U as b,V as U}from"./index.ba2a0c35.js";import"./schema-form.a98a8267.js";import"./index.f26c1058.js";function V(){return k({url:b.list,method:"get"})}function j(n){return k({url:b.kick,method:"post",data:n})}const N=(n={})=>{const t=U().client,e=new Map,r=()=>{Object.keys(n).forEach(a=>{if(t){const s=n[a];e.set(a,s),t.subscribe(a,s)}})},i=()=>{Object.keys(n).forEach(a=>{t&&e.has(a)&&t.unsubscribe(a,e.get(a))})};O(()=>t,r),y(r),E(i)},W={name:"SystemMonitorOnline"};var $=F(m(p({},W),{setup(n){const[t,e]=D();N({connect(){e==null||e.reload()},online(){e==null||e.reload()},offline(){e==null||e.reload()}});const r=[{title:"#",dataIndex:"id",width:80,align:"center",hideInSearch:!0},{title:"\u7528\u6237\u540D",dataIndex:"username",align:"center",bodyCell:({record:a})=>u(B,null,[u("span",{class:"pr-16px"},[a.username]),a.isCurrent&&u(q,{color:"red"},{default:()=>[v("\u5F53\u524D")]})])},{title:"\u767B\u5F55IP",dataIndex:"ip",width:140,align:"center"},{title:"\u767B\u5F55\u65F6\u95F4",dataIndex:"time",align:"center"},{title:"\u64CD\u4F5C\u7CFB\u7EDF",dataIndex:"os",align:"center"},{title:"\u6D4F\u89C8\u5668",dataIndex:"browser",align:"center"},{title:"\u64CD\u4F5C",dataIndex:"$action",align:"center",actions:({record:a})=>[{label:"\u4E0B\u7EBF",auth:"sys.online.kick",disabled:a.disable,popConfirm:{title:"\u786E\u5B9A\u4E0B\u7EBF\u8BE5\u7528\u6237\u5417?",onConfirm:()=>i(a)}}]}],i=a=>h(this,null,function*(){yield j({id:a.id})});return(a,s)=>(I(),M(g(t),{ref:"dynamicTableRef","header-title":"\u5728\u7EBF\u7528\u6237","title-tooltip":"\u8FD9\u662F\u771F\u5B9E\u64CD\u4F5C\uFF0C\u8BF7\u4E0D\u8981\u968F\u610F\u5C06\u5176\u4ED6\u7528\u6237\u8E22\u4E0B\u7EBF\u3002","data-request":g(V),columns:r},null,8,["data-request"]))}}));export{$ as default};
